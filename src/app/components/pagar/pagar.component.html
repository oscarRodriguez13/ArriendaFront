<div class="contenedor-principal">
  <div class="pago-container">
    <h1 class="titulo-pago">Pagar Alquiler</h1>

    <div *ngIf="alquiler; else noAlquiler">
      <!-- Información del Pago -->
      <div class="detalle-pago">
        <h2><i class="fas fa-file-invoice-dollar"></i> Información del Pago</h2>
        <p><strong>Propiedad:</strong> {{ alquiler.propiedad.nombre }}</p>
        <p><strong>Valor Alquiler Total:</strong> ${{ calcularTotal() }}</p>
        <p><strong>Fecha Inicio:</strong> {{ alquiler.fechaInicio | date }}</p>
        <p><strong>Fecha Fin:</strong> {{ alquiler.fechaFin | date }}</p>
        <p><strong>Estado:</strong> {{ alquiler.estado }}</p>
      </div>

      <!-- Reseñas y Formulario de Pago -->
      <div class="contenido-dividido">
        <!-- Reseña de Propiedad -->
        <div class="formulario-resenias">
          <h3><i class="fas fa-home"></i> Reseña para la Propiedad</h3>
          <form (ngSubmit)="enviarReseniaPropiedad()">
            <div class="form-group">
              <label for="calificacionPropiedad"><i class="fas fa-star"></i> Calificación:</label>
              <input
                type="number"
                id="calificacionPropiedad"
                [(ngModel)]="calificacionPropiedad"
                name="calificacionPropiedad"
                min="1"
                max="5"
                required
              />
            </div>
            <div class="form-group">
              <label for="comentarioPropiedad"><i class="fas fa-comment"></i> Comentario:</label>
              <textarea
                id="comentarioPropiedad"
                [(ngModel)]="comentarioPropiedad"
                name="comentarioPropiedad"
                placeholder="Escribe tu opinión sobre la propiedad..."
              ></textarea>
            </div>
            <button type="submit" class="enviar-btn">Enviar Reseña</button>
          </form>
        </div>

        <!-- Reseña de Propietario -->
        <div class="formulario-resenias">
          <h3><i class="fas fa-user"></i> Reseña para el Propietario</h3>
          <form (ngSubmit)="enviarReseniaPropietario()">
            <div class="form-group">
              <label for="calificacionPropietario"><i class="fas fa-star"></i> Calificación:</label>
              <input
                type="number"
                id="calificacionPropietario"
                [(ngModel)]="calificacionPropietario"
                name="calificacionPropietario"
                min="1"
                max="5"
                required
              />
            </div>
            <div class="form-group">
              <label for="comentarioPropietario"><i class="fas fa-comment"></i> Comentario:</label>
              <textarea
                id="comentarioPropietario"
                [(ngModel)]="comentarioPropietario"
                name="comentarioPropietario"
                placeholder="Escribe tu opinión sobre el propietario..."
              ></textarea>
            </div>
            <button type="submit" class="enviar-btn">Enviar Reseña</button>
          </form>
        </div>
      </div>

      <!-- Formulario de Pago -->
      <div class="formulario-pago">
        <h3><i class="fas fa-credit-card"></i> Datos de Pago</h3>
        <form (ngSubmit)="procesarPago()">
          <div class="form-group">
            <label for="valorPago"><i class="fas fa-dollar-sign"></i> Valor:</label>
            <input
              type="number"
              id="valorPago"
              [(ngModel)]="valorPago"
              name="valorPago"
              [value]="calcularTotal()"
              disabled
            />
          </div>
          <div class="form-group">
            <label for="banco"><i class="fas fa-university"></i> Banco:</label>
            <select id="banco" [(ngModel)]="banco" name="banco" required>
              <option *ngFor="let banco of bancos" [value]="banco">{{ banco }}</option>
            </select>
          </div>
          <div class="form-group">
            <label for="numeroCuenta"><i class="fas fa-hashtag"></i> Número de Cuenta:</label>
            <input
              type="text"
              id="numeroCuenta"
              [(ngModel)]="numeroCuenta"
              name="numeroCuenta"
              placeholder="Ej: 1234567890"
              required
            />
          </div>
          <button type="submit" class="pagar-btn">Confirmar Pago</button>
        </form>
      </div>
    </div>

    <ng-template #noAlquiler>
      <p>No se encontró el alquiler.</p>
    </ng-template>
  </div>
</div>
